if("undefined"!=typeof jQuery){var php_settings_var="categoryPosts";jQuery(document).ready((function(){jQuery("."+php_settings_var+"-loadmore button").each((function(){if(jQuery(this).data("scrollto")){var _ul=jQuery(this.parentElement.parentElement).find("ul");_ul.css({height:_ul.prop("scrollHeight")})}})),jQuery(document).on("click","."+php_settings_var+"-loadmore button",(function(){var _this=jQuery(this),id=_this.data("id"),number=_this.data("number"),start=_this.data("start"),context=_this.data("context"),url=tiptoppress[php_settings_var].json_root_url,_ul=jQuery(this.parentElement.parentElement).find("ul"),origText=_this.text(),postCount=_this.data("post-count"),loadingText=_this.data("loading"),loadmoreText=_this.data("placeholder"),widgetNumber=jQuery(this).closest("[id*='"+id+"']").attr("id"),scrollHeight=_ul.prop("scrollHeight"),useScrollTo=_this.data("scrollto");_this.text(loadingText),jQuery.getJSON(url+"/"+id+"/"+start+"/"+number+"/"+context+"/",(function(data){jQuery.each(data,(function(key,li){_ul.append(li),_ul.children().last().trigger("catposts.load_more")})),postCount<start+number?_this.hide():(loadmoreText=(loadmoreText=loadmoreText.replace("%step%",start+number-1)).replace("%all%",postCount),_this.text(loadmoreText),_this.data("start",start+number))})).done((function(){useScrollTo&&_ul.stop().animate({scrollTop:scrollHeight},1e3,"swing");var widget=jQuery("#"+widgetNumber),widgetImage=jQuery(widget).find(".cat-post-item img").first();cat_posts_namespace.layout_wrap_text.preWrap(widget),cat_posts_namespace.layout_wrap_text.setClass(widget),0!==parseInt(widgetImage.data("cat-posts-height"))&&0!==parseInt(widgetImage.data("cat-posts-width"))&&cat_posts_namespace.layout_img_size.setHeight(widget)})).fail((function(){_this.text(origText)}))}))}))}
